{"remainingRequest":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\otino\\Desktop\\WEB56\\Client\\src\\components\\views\\LoginPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\src\\components\\views\\LoginPage.vue","mtime":1575643814000},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24uYmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG9naW4nLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2dpbjogJycsCiAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgZGlzbWlzc1NlY3M6IDQsCiAgICAgIGRpc21pc3NDb3VudERvd246IDAKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZ2V0VXNlcjogZnVuY3Rpb24gZ2V0VXNlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMudXNlcjsKICAgIH0sCiAgICBnZXRFcnJvcjogZnVuY3Rpb24gZ2V0RXJyb3IoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmxvZ2luRXJyb3I7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBjcmVhdGVkJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgaWYgKCEodGhpcy5nZXRFcnJvciAhPT0gbnVsbCkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5zaG93QWxlcnQoKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ1NFVF9FUlJPUicsIHsKICAgICAgICAgICAgICAgIHR5cGU6ICdsb2dpbicsCiAgICAgICAgICAgICAgICBlcnJvcjogbnVsbAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LmJpbmQodGhpcyksIDUwMDApKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgbnVsbCwgdGhpcyk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBjb3VudERvd25DaGFuZ2VkOiBmdW5jdGlvbiBjb3VudERvd25DaGFuZ2VkKGRpc21pc3NDb3VudERvd24pIHsKICAgICAgdGhpcy5kaXNtaXNzQ291bnREb3duID0gZGlzbWlzc0NvdW50RG93bjsKICAgIH0sCiAgICBzaG93QWxlcnQ6IGZ1bmN0aW9uIHNob3dBbGVydCgpIHsKICAgICAgdGhpcy5kaXNtaXNzQ291bnREb3duID0gdGhpcy5kaXNtaXNzU2VjczsKICAgIH0sCiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbG9naW4sIHBhc3N3b3JkOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIG9uU3VibWl0JChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBsb2dpbiA9IHRoaXMubG9naW4gPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpcy5sb2dpbi50cmltKCk7CiAgICAgICAgICAgICAgcGFzc3dvcmQgPSB0aGlzLnBhc3N3b3JkID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXMucGFzc3dvcmQudHJpbSgpOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGZldGNoKCIvYXBpL2xvZ2luP3VzZXJfbG9naW49Ii5jb25jYXQobG9naW4sICImdXNlcl9wYXNzd29yZD0iKS5jb25jYXQocGFzc3dvcmQpLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnCiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICByZXNwb25zZS5qc29uKCkudGhlbihmdW5jdGlvbiAoanNvbikgewogICAgICAgICAgICAgICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnU0VUX0VSUk9SJywgewogICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2xvZ2luJywKICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBudWxsCiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnU0VUX1VTRVInLCBKU09OLnBhcnNlKGpzb24pKTsKCiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmlkID0gX3RoaXMuZ2V0VXNlci5pZDsKICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UubG9naW4gPSBfdGhpcy5nZXRVc2VyLmxvZ2luOwoKICAgICAgICAgICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgcGF0aDogJy9ob21lJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmpzb24oKS50aGVuKGZ1bmN0aW9uIChqc29uKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdTRVRfRVJST1InLCB7CiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbG9naW4nLAogICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGpzb24uZXJyb3IKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2hvd0FsZXJ0KCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdTRVRfRVJST1InLCB7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICdsb2dpbicsCiAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcgogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgX3RoaXMuc2hvd0FsZXJ0KCk7CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["LoginPage.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"container\">\n        <section class=\"card card-default w-50 mx-auto\">\n            <h4 class=\"card-header alert-info text-center\">Login</h4>\n\n            <form class=\"card-body\" @submit.prevent=\"onSubmit\">\n                <b-alert variant=\"danger\"\n                         :show=\"dismissCountDown\"\n\t\t\t\t\t\t dismissible fade\n                         @dismiss-count-down=\"countDownChanged\">\n                    {{ getError }}\n                </b-alert>\n\n                <div class=\"form-group\">\n                    <label for=\"login-input\">Username:</label>\n                    <input type=\"text\" name=\"login\" class=\"form-control\" id=\"login-input\" placeholder=\"Username\"\n                           v-model=\"login\">\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"password-input\">Password:</label>\n                    <input type=\"password\" name=\"password\" class=\"form-control\" id=\"password-input\" placeholder=\"******\"\n                           v-model=\"password\">\n                </div>\n                <button type=\"submit\" class=\"btn btn-primary text-center\">Login to account</button>\n            </form>\n        </section>\n    </div>\n</template>\n\n\n<script>\n\n    export default {\n        name: 'Login',\n        data() {\n            return {\n                login: '',\n                password: '',\n                dismissSecs: 4,\n                dismissCountDown: 0\n            }\n        },\n        computed: {\n            getUser() {\n                return this.$store.getters.user;\n            },\n            getError() {\n                return this.$store.getters.loginError;\n            }\n        },\n        async created() {\n            if (this.getError !== null ) {\n                this.showAlert();\n                await setTimeout(function () {\n                    this.$store.dispatch('SET_ERROR', {type: 'login', error: null});\n                }.bind(this), 5000);\n            }\n        },\n        methods: {\n            countDownChanged(dismissCountDown) {\n                this.dismissCountDown = dismissCountDown\n            },\n            showAlert() {\n                this.dismissCountDown = this.dismissSecs\n            },\n            async onSubmit() {\n                let login = this.login === undefined ? '' : this.login.trim();\n                let password = this.password === undefined ? '' : this.password.trim();\n\n                await fetch(`/api/login?user_login=${login}&user_password=${password}`, {\n                    method: 'GET'\n                })\n                    .then(response => {\n                        if (response.status === 200) {\n                            response.json()\n                                .then(json => {\n                                    this.$store.dispatch('SET_ERROR', {type: 'login', error: null});\n                                    this.$store.dispatch('SET_USER', JSON.parse(json));\n                                    localStorage.id = this.getUser.id;\n                                    localStorage.login = this.getUser.login;\n                                    this.$router.push({path: '/home'});\n                                });\n                        } else {\n                            response.json()\n                                .then(json => {\n                                    this.$store.dispatch('SET_ERROR', {type: 'login', error: json.error});\n                                    this.showAlert();\n                                });\n                        }\n                    })\n                    .catch(error => {\n                        this.$store.dispatch('SET_ERROR', {type: 'login', error: error});\n                        this.showAlert();\n                    });\n            }\n        }\n    }\n</script>\n\n<style>\n\n    label {\n        float: left;\n    }\n\n    .container {\n        min-height: calc(700px - 5vh - 3rem);\n        height: calc(100% - 12.5rem - 5vh);\n        max-width: calc(100% - 40vw);\n    }\n\n</style>"],"sourceRoot":"src/components/views"}]}