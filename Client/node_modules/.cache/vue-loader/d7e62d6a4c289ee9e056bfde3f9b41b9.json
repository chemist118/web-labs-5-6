{"remainingRequest":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\otino\\Desktop\\WEB56\\Client\\src\\components\\AddTodo.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\src\\components\\AddTodo.vue","mtime":1607003002881},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgogICAgZXhwb3J0IGRlZmF1bHQgewogICAgICAgIG5hbWU6ICJBZGRUb2RvIiwKICAgICAgICBkYXRhKCkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgdGl0bGU6ICcnLAoJCQkJdGV4dEFsZXJ0OiAnJywKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICAgICAgICAgIGRpc21pc3NTZWNzOiA0LAogICAgICAgICAgICAgICAgZGlzbWlzc0NvdW50RG93bjogMCwKCQkJCWRpc21pc3NTZWNzR29vZDogNCwKCQkJCWRpc21pc3NDb3VudERvd25Hb29kOiAwCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGNvbXB1dGVkOiB7CiAgICAgICAgICAgIGdldFVzZXIoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy51c2VyOwogICAgICAgICAgICB9LAogICAgICAgICAgICB0b2RvTGlzdCgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLlRPRE9TOwogICAgICAgICAgICB9LAogICAgICAgICAgICBnZXRFcnJvcigpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmFkZEVycm9yOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBjcmVhdGVkKCkgewogICAgICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnU0VUX0VSUk9SJywge3R5cGU6ICdlZGl0JywgZXJyb3I6IG51bGx9KTsKICAgICAgICAgICAgaWYgKHRoaXMuZ2V0RXJyb3IgIT09IG51bGwgKXsKICAgICAgICAgICAgCWNvbnNvbGUubG9nKHRoaXMuZ2V0RXJyb3IpOwogICAgICAgICAgICAgICAgdGhpcy5zaG93QWxlcnQoKTsKICAgICAgICAgICAgICAgIGF3YWl0IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdTRVRfRVJST1InLCB7dHlwZTogJ2FkZCcsIGVycm9yOiBudWxsfSk7CiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksIDUwMDApOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBtZXRob2RzOiB7CiAgICAgICAgICAgIGNvdW50RG93bkNoYW5nZWQoZGlzbWlzc0NvdW50RG93bikgewogICAgICAgICAgICAgICAgdGhpcy5kaXNtaXNzQ291bnREb3duID0gZGlzbWlzc0NvdW50RG93bgogICAgICAgICAgICB9LAoJCQljb3VudERvd25DaGFuZ2VkR29vZChkaXNtaXNzQ291bnREb3duR29vZCkgewoJCQkJdGhpcy5kaXNtaXNzQ291bnREb3duR29vZCA9IGRpc21pc3NDb3VudERvd25Hb29kOwoJCQl9LAoJCQlzaG93QWxlcnQoZ29vZCkgewoJCQkJaWYgKGdvb2QpIHsKCQkJCQl0aGlzLmRpc21pc3NDb3VudERvd24gPSAwOwoJCQkJCXRoaXMuZGlzbWlzc0NvdW50RG93bkdvb2QgPSB0aGlzLmRpc21pc3NTZWNzOwoJCQkJCXRoaXMudGV4dEFsZXJ0ID0gJ1Rhc2sgc3VjY2Vzc2Z1bGx5IGFkZGVkJzsKCQkJCX0KCQkJCWVsc2UgewoJCQkJCXRoaXMuZGlzbWlzc0NvdW50RG93bkdvb2QgPSAwOwoJCQkJCXRoaXMuZGlzbWlzc0NvdW50RG93biA9IHRoaXMuZGlzbWlzc1NlY3M7CgkJCQkJdGhpcy50ZXh0QWxlcnQgPSB0aGlzLmdldEVycm9yOwoJCQkJfQoJCQl9LAogICAgICAgICAgICBhc3luYyBvblN1Ym1pdCgpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy50aXRsZSA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzLnRpdGxlLnRyaW0oKTsKICAgICAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGhpcy5kZXNjcmlwdGlvbiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzLmRlc2NyaXB0aW9uLnRyaW0oKTsKCiAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaChgL2FwaS90b2Rvc2AsIHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHRoaXMuZ2V0VXNlci5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogJ2ZhbHNlJwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04IgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmpzb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGpzb24gPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnU0VUX0VSUk9SJywge3R5cGU6ICdhZGQnLCBlcnJvcjogbnVsbH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnQUREX1RPRE8nLCBKU09OLnBhcnNlKGpzb24pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aXRsZSA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0FsZXJ0KHRydWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5qc29uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihqc29uID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ1NFVF9FUlJPUicsIHt0eXBlOiAnYWRkJywgZXJyb3I6IGpzb24uZXJyb3J9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93QWxlcnQoZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnU0VUX0VSUk9SJywge3R5cGU6J2FkZCcsIGVycm9yOiBlcnJvcn0pOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dBbGVydChmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cg=="},{"version":3,"sources":["AddTodo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddTodo.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"rowcard my-rowcard card-default col-sm\">\n\n        <h4 class=\"alert alert-info text-left\">Добавление задачи</h4>\n        <form @submit.prevent=\"onSubmit\">\n\t\t\t<b-alert variant=\"danger\"\n\t\t\t\t\t :show=\"dismissCountDown\"\n\t\t\t\t\t dismissible fade\n\t\t\t\t\t @dismiss-count-down=\"countDownChanged\">\n\t\t\t\t{{ textAlert }}\n\t\t\t</b-alert>\n\t\t\t<b-alert variant=\"success\"\n\t\t\t\t\t :show=\"dismissCountDownGood\"\n\t\t\t\t\t dismissible fade\n\t\t\t\t\t @dismiss-count-down=\"countDownChangedGood\">\n\t\t\t\t{{ textAlert }}\n\t\t\t</b-alert>\n\n            <div class=\"form-group\">\n                <label for=\"title-input\">Заголовок:</label>\n                <input type=\"text\" class=\"form-control\" id=\"title-input\" placeholder=\"Заголовок задачи\" v-model=\"title\">\n            </div>\n            <div class=\"form-group\">\n                <label for=\"description-input\">Описание:</label>\n                <input type=\"text\" class=\"form-control\" id=\"description-input\" placeholder=\"Описание\"\n                       v-model=\"description\">\n            </div>\n            <button type=\"submit\" class=\"btn btn-primary text-center\">Добавить</button>\n        </form>\n    </div>\n\n</template>\n\n<script>\n\n    export default {\n        name: \"AddTodo\",\n        data() {\n            return {\n                title: '',\n\t\t\t\ttextAlert: '',\n                description: '',\n                dismissSecs: 4,\n                dismissCountDown: 0,\n\t\t\t\tdismissSecsGood: 4,\n\t\t\t\tdismissCountDownGood: 0\n            }\n        },\n        computed: {\n            getUser() {\n                return this.$store.getters.user;\n            },\n            todoList() {\n                return this.$store.getters.TODOS;\n            },\n            getError() {\n                return this.$store.getters.addError;\n            }\n        },\n        async created() {\n            await this.$store.dispatch('SET_ERROR', {type: 'edit', error: null});\n            if (this.getError !== null ){\n            \tconsole.log(this.getError);\n                this.showAlert();\n                await setTimeout(function () {\n                    this.$store.dispatch('SET_ERROR', {type: 'add', error: null});\n                }.bind(this), 5000);\n            }\n        },\n        methods: {\n            countDownChanged(dismissCountDown) {\n                this.dismissCountDown = dismissCountDown\n            },\n\t\t\tcountDownChangedGood(dismissCountDownGood) {\n\t\t\t\tthis.dismissCountDownGood = dismissCountDownGood;\n\t\t\t},\n\t\t\tshowAlert(good) {\n\t\t\t\tif (good) {\n\t\t\t\t\tthis.dismissCountDown = 0;\n\t\t\t\t\tthis.dismissCountDownGood = this.dismissSecs;\n\t\t\t\t\tthis.textAlert = 'Task successfully added';\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.dismissCountDownGood = 0;\n\t\t\t\t\tthis.dismissCountDown = this.dismissSecs;\n\t\t\t\t\tthis.textAlert = this.getError;\n\t\t\t\t}\n\t\t\t},\n            async onSubmit() {\n                const title = this.title === undefined ? '' : this.title.trim();\n                const description = this.description === undefined ? '' : this.description.trim();\n\n                await fetch(`/api/todos`, {\n                    method: 'POST',\n                    body: JSON.stringify({\n                        user_id: this.getUser.id,\n                        title: title,\n                        description: description,\n                        completed: 'false'\n                    }),\n                    headers: {\n                        \"Content-type\": \"application/json; charset=UTF-8\"\n                    }\n                })\n                    .then(response => {\n                        if (response.status === 200) {\n                            response.json()\n                                .then(json => {\n                                    this.$store.dispatch('SET_ERROR', {type: 'add', error: null});\n                                    this.$store.dispatch('ADD_TODO', JSON.parse(json));\n                                    this.title = '';\n                                    this.description = '';\n                                    this.showAlert(true)\n                                });\n                        } else {\n                            response.json()\n                                .then(json => {\n                                    this.$store.dispatch('SET_ERROR', {type: 'add', error: json.error});\n                                    this.showAlert(false);\n                                });\n                        }\n                    })\n                    .catch(error => {\n                        this.$store.dispatch('SET_ERROR', {type:'add', error: error});\n                        this.showAlert(false);\n                    });\n            }\n        }\n    }\n</script>\n\n<style>\n\n    .my-rowcard {\n        min-height: calc(700px - 5vh - 3rem);\n        max-width: calc(100% - 50vw);\n    }\n\n    button {\n        float: left;\n    }\n\n    label {\n        float: left;\n    }\n\n</style>"]}]}