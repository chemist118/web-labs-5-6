{"remainingRequest":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\otino\\Desktop\\WEB56\\Client\\src\\components\\TodoItem.vue?vue&type=style&index=0&id=33df0029&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\src\\components\\TodoItem.vue","mtime":1607056158634},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKc3BhbiB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKfQoKbGkgewogICAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsKICAgIHBhZGRpbmc6IDAuNXJlbSAxcmVtOwogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBtYXJnaW4tdG9wOiAwLjVyZW07CiAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07Cn0KCi5teS1jaGVja2JveCB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIG1hcmdpbi1yaWdodDogMC41cmVtOwp9CgoubXktYnV0dG9uLWRlbGV0ZSB7CiAgICBtYXJnaW4tbGVmdDogYXV0bzsKICAgIHBhZGRpbmctbGVmdDogMXJlbTsKfQo="},{"version":3,"sources":["TodoItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqKA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"TodoItem.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\t<div>\n\t\t<Loader v-if=\"loading\"></Loader>\n\t\t<li v-else>\n\t\t\t<b-alert variant=\"danger\"\n\t\t\t\t\t :show=\"dismissCountDown\"\n\t\t\t\t\t dismissible fade\n\t\t\t\t\t @dismiss-count-down=\"countDownChanged\">\n\t\t\t\t{{ textAlert }}\n\t\t\t</b-alert>\n\t\t\t<span>\n\t\t\t\t<label>\n\t\t\t\t\t<input v-model=\"todo.completed === 'true'\" type=\"checkbox\" class=\"my-checkbox\"\n\t\t\t\t\t\t   v-on:change=\"editStatusTodo()\">\n\t\t\t\t</label>\n\n\t\t\t\t<keep-alive>\n\t\t\t\t\t<router-link tag=\"a\" :to=\"{ name: 'todoId', params: { id: todo.id} }\">{{todo.title}}</router-link>\n\t\t\t\t</keep-alive>\n\n\t\t\t</span>\n\t\t\t<button class=\"my-button-delete btn  btn-danger\" v-on:click=\"removeTodoClicked(todo.id)\">Удалить</button>\n\t\t</li>\n\t</div>\n</template>\n\n\n<script>\n    import Loader from '@/components/Loader.vue'\n\n    export default {\n        name: 'TodoItem',\n        props: {\n            todo: {\n                type: Object,\n                required: true\n            }\n        },\n        data() {\n            return {\n            \terror: false,\n                loading: false,\n\t\t\t\ttextAlert: '',\n\t\t\t\tdismissSecs: 4,\n\t\t\t\tdismissCountDown: 0,\n\t\t\t\tdismissSecsGood: 4,\n\t\t\t\tdismissCountDownGood: 0\n            }\n        },\n        components: {\n            Loader\n        },\n        computed: {\n            todoList() {\n                return this.$store.getters.TODOS;\n            },\n\t\t\tgetError() {\n\t\t\t\treturn this.$store.getters.addError;\n\t\t\t}\n        },\n        methods: {\n\t\t\tcountDownChanged(dismissCountDown) {\n\t\t\t\tthis.dismissCountDown = dismissCountDown\n\t\t\t},\n\t\t\tcountDownChangedGood(dismissCountDownGood) {\n\t\t\t\tthis.dismissCountDownGood = dismissCountDownGood;\n\t\t\t},\n\t\t\tshowAlert(good) {\n\t\t\t\tif (good) {\n\t\t\t\t\tthis.dismissCountDown = 0;\n\t\t\t\t\tthis.dismissCountDownGood = this.dismissSecs;\n\t\t\t\t\tthis.textAlert = 'Task successfully removed';\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.dismissCountDownGood = 0;\n\t\t\t\t\tthis.dismissCountDown = this.dismissSecs;\n\t\t\t\t\tthis.textAlert = this.getError;\n\t\t\t\t}\n\t\t\t},\n            async removeTodoClicked(id) {\n                if (!confirm('Вы уверены?')) {\n                    return;\n                }\n                this.loading = true;\n                await fetch(`/api/todos/delete`, {\n                    method: 'POST',\n                    body: JSON.stringify({\n                        id: this.todo.id,\n                        user_id: this.todo.user_id\n                    }),\n                    headers: {\n                        \"Content-type\": \"application/json; charset=UTF-8\"\n                    }\n                })\n                    .then(response => {\n                        if (response.status === 200 || response.status === 404) {\n                            response.json()\n                                .then(json => {\n                                    this.$store.dispatch('SET_ERROR', {type: 'add', error: null});\n                                    this.$store.dispatch('DELETE_TODO', this.todoList.findIndex(t => t.id === id));\n                                });\n                        } else {\n                            response.json()\n                                .then(json => {\n                                    this.$store.dispatch('SET_ERROR', {type: 'add', error: json.error});\n                                    this.showAlert(false);\n                                });\n                        }\n                    })\n                    .catch(error => {\n                        this.$store.dispatch('SET_ERROR', {type: 'add', error: error});\n                        this.showAlert(false);\n                    });\n\n                this.loading = false;\n            },\n            async editStatusTodo() {\n                await fetch(`/api/todos/${this.todo.id}`, {\n                    method: 'POST',\n                    body: JSON.stringify({\n                        user_id: this.todo.user_id,\n                        title: this.todo.title,\n                        description: this.todo.description,\n                        completed: this.todo.completed === 'false' ? 'true' : 'false'\n                    }),\n                    headers: {\n                        \"Content-type\": \"application/json; charset=UTF-8\"\n                    }\n                })\n                    .then(response => {\n                        if (response.status === 200) {\n                            response.json()\n                                .then(json => {\n                                    this.$store.dispatch('SET_ERROR', {type: 'add', error: null});\n                                    this.$store.dispatch('EDIT_TODO', {\n                                        idx: this.todoList.indexOf(this.todo),\n                                        todo: JSON.parse(json)\n                                    });\n                                });\n                        } else if (response.status === 404)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$store.dispatch('SET_ERROR', {type: 'add', error: null});\n\t\t\t\t\t\t\tthis.$store.dispatch('DELETE_TODO', this.todoList.findIndex(t => t.id === id));\n\t\t\t\t\t\t}\n                        else\n                        \t{\n                            response.json()\n                                .then(json => {\n                                    this.$store.dispatch('SET_ERROR', {type: 'add', error: json.error});\n                                    this.showAlert(false);\n                                });\n                        }\n                    })\n                    .catch(error => {\n                        this.$store.dispatch('SET_ERROR', {type: 'add', error: error});\n                        this.showAlert(false);\n                    });\n            }\n        }\n    }\n</script>\n\n\n<style scoped>\n\n    span {\n        display: flex;\n        align-items: center;\n    }\n\n    li {\n        border: 1px solid #ccc;\n        padding: 0.5rem 1rem;\n        display: flex;\n        align-items: center;\n        margin-top: 0.5rem;\n        margin-bottom: 0.5rem;\n    }\n\n    .my-checkbox {\n        display: flex;\n        align-items: center;\n        margin-right: 0.5rem;\n    }\n\n    .my-button-delete {\n        margin-left: auto;\n        padding-left: 1rem;\n    }\n</style>"]}]}