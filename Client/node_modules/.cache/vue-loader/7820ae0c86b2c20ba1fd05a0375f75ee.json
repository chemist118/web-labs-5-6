{"remainingRequest":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\otino\\Desktop\\WEB56\\Client\\src\\components\\views\\DescriptionPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\src\\components\\views\\DescriptionPage.vue","mtime":1575649194000},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMb2FkZXIgZnJvbSAnQC9jb21wb25lbnRzL0xvYWRlci52dWUnCmltcG9ydCBDb21tZW50TGlzdCBmcm9tICdAL2NvbXBvbmVudHMvQ29tbWVudExpc3QudnVlJwppbXBvcnQgQ29tbWVudEl0ZW0gZnJvbSAnQC9jb21wb25lbnRzL0NvbW1lbnRJdGVtLnZ1ZScKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJHZXRUb2RvRGVzY3JpcHRpb24iLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBjb21tZW50czogW10sCiAgICAgICAgICAgIHRpdGxlOiAnJywKICAgICAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgICAgICBjb21wbGV0ZWQ6IGZhbHNlLAogICAgICAgICAgICBpZDogTnVtYmVyKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCksCiAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgICAgICAgIHNlZW46IGZhbHNlLAogICAgICAgICAgICBkaXNtaXNzU2VjczogMywKICAgICAgICAgICAgZGlzbWlzc0NvdW50RG93bjogMAogICAgICAgIH0KICAgIH0sCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgTG9hZGVyLAogICAgICAgIENvbW1lbnRMaXN0LAogICAgICAgIENvbW1lbnRJdGVtCiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICBnZXRUb2RvKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy5UT0RPOwogICAgICAgIH0sCiAgICAgICAgdG9kb0xpc3QoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLlRPRE9TOwogICAgICAgIH0sCiAgICAgICAgZ2V0RXJyb3IoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmVkaXRFcnJvcjsKICAgICAgICB9LAogICAgICAgIGdldFVzZXIoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLnVzZXI7CiAgICAgICAgfSwKICAgIH0sCiAgICBhc3luYyBjcmVhdGVkKCkgewogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdTRVRfRVJST1InLCB7dHlwZTogJ2FkZCcsIGVycm9yOiBudWxsfSk7CiAgICAgICAgaWYgKHRoaXMudG9kb0xpc3QubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdGRVRDSF9UT0RPUycsIHtpZDogdGhpcy5nZXRVc2VyLmlkIH0pOwogICAgICAgIH0KICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnRvZG9MaXN0KTsKICAgICAgICBpZiAodGhpcy50b2RvTGlzdC5maW5kKHQgPT4gdC5pZCA9PT0gdGhpcy5pZCkpIHsKICAgICAgICAgICAgY29uc3QgdG9kbyA9IHRoaXMudG9kb0xpc3QuZmluZCh0ID0+IHQuaWQgPT09IHRoaXMuaWQpOwogICAgICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnU0VUX1RPRE8nLCB0b2RvKTsKICAgICAgICAgICAgdGhpcy50aXRsZSA9IHRvZG8udGl0bGU7CiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSB0b2RvLmRlc2NyaXB0aW9uOwogICAgICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IHRvZG8uY29tcGxldGVkOwogICAgICAgICAgICBhd2FpdCBmZXRjaChgaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL2NvbW1lbnRzP3Bvc3RJZD0ke3RoaXMuaWR9Jl9saW1pdD00YCkKICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkKICAgICAgICAgICAgICAgIC50aGVuKGpzb24gPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuY29tbWVudHMgPSBqc29uOwogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdTRVRfRVJST1InLCB7dHlwZTogJ2VkaXQnLCBlcnJvcjogbnVsbH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdTRVRfRVJST1InLCB7dHlwZTogJ2FkZCcsIGVycm9yOiAnVGFzayBkb2VzIG5vdCBleGlzdCd9KTsKICAgICAgICAgICAgYXdhaXQgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6ICcvdG9kb3MnfSk7CiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBjb3VudERvd25DaGFuZ2VkKGRpc21pc3NDb3VudERvd24pIHsKICAgICAgICAgICAgdGhpcy5kaXNtaXNzQ291bnREb3duID0gZGlzbWlzc0NvdW50RG93bgogICAgICAgIH0sCiAgICAgICAgc2hvd0FsZXJ0KCkgewogICAgICAgICAgICB0aGlzLmRpc21pc3NDb3VudERvd24gPSB0aGlzLmRpc21pc3NTZWNzCiAgICAgICAgfSwKICAgICAgICBhc3luYyBvblN1Ym1pdCgpIHsKICAgICAgICAgICAgY29uc3QgdGl0bGUgPSB0aGlzLnRpdGxlID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXMudGl0bGUudHJpbSgpOwogICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRoaXMuZGVzY3JpcHRpb24gPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpcy5kZXNjcmlwdGlvbi50cmltKCk7CgogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICBhd2FpdCBmZXRjaChgL2FwaS90b2Rvcy8ke3RoaXMuZ2V0VG9kby5pZH1gLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICB1c2VyX2lkOiB0aGlzLmdldFRvZG8udXNlcl9pZCwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogdGhpcy5jb21wbGV0ZWQKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICJDb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOCIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuanNvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihqc29uID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnU0VUX0VSUk9SJywge3R5cGU6ICdlZGl0JywgZXJyb3I6IG51bGx9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnRURJVF9UT0RPJywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHg6IHRoaXMudG9kb0xpc3QuaW5kZXhPZih0aGlzLmdldFRvZG8pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2RvOiBKU09OLnBhcnNlKGpzb24pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiAnL3RvZG9zJ30pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuanNvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihqc29uID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnU0VUX0VSUk9SJywge3R5cGU6ICdlZGl0JywgZXJyb3I6IGpzb24uZXJyb3J9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dBbGVydCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ1NFVF9FUlJPUicsIHt0eXBlOiAnZWRpdCcsIGVycm9yOiBlcnJvcn0pOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0FsZXJ0KCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["DescriptionPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DescriptionPage.vue","sourceRoot":"src/components/views","sourcesContent":["<template>\n    <form class=\"container w-100 mx-auto\">\n        <h4 class=\"alert alert-info text-center\">Task information</h4>\n\n        <form class=\"card-body\">\n            <b-alert class=\"alert alert-danger\"\n                     :show=\"dismissCountDown\"\n                     @dismissed=\"dismissCountDown=0\"\n                     @dismiss-count-down=\"countDownChanged\">\n                {{ getError }}\n            </b-alert>\n\n            <Loader v-if=\"loading\"></Loader>\n            <form v-else @submit.prevent=\"onSubmit\">\n                <div class=\"form-group\">\n                    <label for=\"title-input\">Title:</label>\n                    <input type=\"text\" name=\"title\" class=\"form-control\" id=\"title-input\" placeholder=\"Заголовок\"\n                           v-model=\"title\">\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"description-input\">Description:</label>\n                    <input type=\"text\" name=\"description\" class=\"form-control\" id=\"description-input\"\n                           placeholder=\"Описание\"\n                           v-model=\"description\">\n\n                </div>\n                <div class=\"form-group\">\n                    <label>Status:</label>\n                    <select v-model=\"completed\" class=\"form-control for-margin\" aria-label=\"Basic example\">\n                        <option value=\"true\" selected>Finished</option>\n                        <option value=\"false\">Unfinished</option>\n                    </select>\n                </div>\n                <button type=\"submit\" class=\"btn btn-primary text-center\">Update</button>\n\n            </form>\n\n        </form>\n\n        <Loader v-if=\"loading\"></Loader>\n        <form v-else class=\"card-body my-comment\">\n            <CommentList :comments=\"comments\"/>\n        </form>\n\n    </form>\n</template>\n\n<script>\n    import Loader from '@/components/Loader.vue'\n    import CommentList from '@/components/CommentList.vue'\n    import CommentItem from '@/components/CommentItem.vue'\n\n    export default {\n        name: \"GetTodoDescription\",\n        data() {\n            return {\n                comments: [],\n                title: '',\n                description: '',\n                completed: false,\n                id: Number(this.$route.params.id),\n                loading: true,\n                seen: false,\n                dismissSecs: 3,\n                dismissCountDown: 0\n            }\n        },\n        components: {\n            Loader,\n            CommentList,\n            CommentItem\n        },\n        computed: {\n            getTodo() {\n                return this.$store.getters.TODO;\n            },\n            todoList() {\n                return this.$store.getters.TODOS;\n            },\n            getError() {\n                return this.$store.getters.editError;\n            },\n            getUser() {\n                return this.$store.getters.user;\n            },\n        },\n        async created() {\n            await this.$store.dispatch('SET_ERROR', {type: 'add', error: null});\n            if (this.todoList.length === 0) {\n                await this.$store.dispatch('FETCH_TODOS', {id: this.getUser.id });\n            }\n            console.log(this.todoList);\n            if (this.todoList.find(t => t.id === this.id)) {\n                const todo = this.todoList.find(t => t.id === this.id);\n                await this.$store.dispatch('SET_TODO', todo);\n                this.title = todo.title;\n                this.description = todo.description;\n                this.completed = todo.completed;\n                await fetch(`https://jsonplaceholder.typicode.com/comments?postId=${this.id}&_limit=4`)\n                    .then(response => response.json())\n                    .then(json => {\n                        this.comments = json;\n                        this.loading = false;\n                    });\n                await this.$store.dispatch('SET_ERROR', {type: 'edit', error: null});\n            } else {\n                await this.$store.dispatch('SET_ERROR', {type: 'add', error: 'Task does not exist'});\n                await this.$router.push({path: '/todos'});\n            }\n        },\n        methods: {\n            countDownChanged(dismissCountDown) {\n                this.dismissCountDown = dismissCountDown\n            },\n            showAlert() {\n                this.dismissCountDown = this.dismissSecs\n            },\n            async onSubmit() {\n                const title = this.title === undefined ? '' : this.title.trim();\n                const description = this.description === undefined ? '' : this.description.trim();\n\n                this.loading = true;\n                await fetch(`/api/todos/${this.getTodo.id}`, {\n                    method: 'POST',\n                    body: JSON.stringify({\n                        user_id: this.getTodo.user_id,\n                        title: title,\n                        description: description,\n                        completed: this.completed\n                    }),\n                    headers: {\n                        \"Content-type\": \"application/json; charset=UTF-8\"\n                    }\n                })\n                    .then(response => {\n                        if (response.status === 200) {\n                            response.json()\n                                .then(json => {\n                                    this.$store.dispatch('SET_ERROR', {type: 'edit', error: null});\n                                    this.$store.dispatch('EDIT_TODO', {\n                                        idx: this.todoList.indexOf(this.getTodo),\n                                        todo: JSON.parse(json)\n                                    });\n\n                                    this.$router.push({path: '/todos'});\n                                });\n                        } else {\n                            response.json()\n                                .then(json => {\n                                    this.$store.dispatch('SET_ERROR', {type: 'edit', error: json.error});\n                                    this.showAlert();\n                                });\n                        }\n                    })\n                    .catch(error => {\n                        this.$store.dispatch('SET_ERROR', {type: 'edit', error: error});\n                        this.showAlert();\n                    });\n                this.loading = false;\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n    label {\n        float: left;\n    }\n\n    button {\n        float: left;\n    }\n\n    .container {\n        min-height: calc(700px - 5vh - 3rem);\n        max-width: calc(100% - 40vw);\n    }\n\n    .alert {\n        margin-bottom: 0;\n    }\n\n    .form-group {\n        margin-bottom: 1.25rem;\n    }\n\n    .card-body {\n        padding: 1.25rem 0 1.25rem 0;\n    }\n\n    .my-comment {\n        margin-top: 1.5rem;\n        padding: 1.25rem 0 0 0;\n    }\n\n</style>"]}]}