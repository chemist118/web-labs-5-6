{"remainingRequest":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\otino\\Desktop\\WEB56\\Client\\src\\components\\TodoItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\src\\components\\TodoItem.vue","mtime":1575661476000},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\otino\\Desktop\\WEB56\\Client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgICBpbXBvcnQgTG9hZGVyIGZyb20gJ0AvY29tcG9uZW50cy9Mb2FkZXIudnVlJwoKICAgIGV4cG9ydCBkZWZhdWx0IHsKICAgICAgICBuYW1lOiAnVG9kb0l0ZW0nLAogICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgIHRvZG86IHsKICAgICAgICAgICAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGRhdGEoKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIAllcnJvcjogZmFsc2UsCiAgICAgICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSwKCQkJCXRleHRBbGVydDogJycsCgkJCQlkaXNtaXNzU2VjczogNCwKCQkJCWRpc21pc3NDb3VudERvd246IDAsCgkJCQlkaXNtaXNzU2Vjc0dvb2Q6IDQsCgkJCQlkaXNtaXNzQ291bnREb3duR29vZDogMAogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBjb21wb25lbnRzOiB7CiAgICAgICAgICAgIExvYWRlcgogICAgICAgIH0sCiAgICAgICAgY29tcHV0ZWQ6IHsKICAgICAgICAgICAgdG9kb0xpc3QoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy5UT0RPUzsKICAgICAgICAgICAgfSwKCQkJZ2V0RXJyb3IoKSB7CgkJCQlyZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy5hZGRFcnJvcjsKCQkJfQogICAgICAgIH0sCiAgICAgICAgbWV0aG9kczogewoJCQljb3VudERvd25DaGFuZ2VkKGRpc21pc3NDb3VudERvd24pIHsKCQkJCXRoaXMuZGlzbWlzc0NvdW50RG93biA9IGRpc21pc3NDb3VudERvd24KCQkJfSwKCQkJY291bnREb3duQ2hhbmdlZEdvb2QoZGlzbWlzc0NvdW50RG93bkdvb2QpIHsKCQkJCXRoaXMuZGlzbWlzc0NvdW50RG93bkdvb2QgPSBkaXNtaXNzQ291bnREb3duR29vZDsKCQkJfSwKCQkJc2hvd0FsZXJ0KGdvb2QpIHsKCQkJCWlmIChnb29kKSB7CgkJCQkJdGhpcy5kaXNtaXNzQ291bnREb3duID0gMDsKCQkJCQl0aGlzLmRpc21pc3NDb3VudERvd25Hb29kID0gdGhpcy5kaXNtaXNzU2VjczsKCQkJCQl0aGlzLnRleHRBbGVydCA9ICdUYXNrIHN1Y2Nlc3NmdWxseSByZW1vdmVkJzsKCQkJCX0KCQkJCWVsc2UgewoJCQkJCXRoaXMuZGlzbWlzc0NvdW50RG93bkdvb2QgPSAwOwoJCQkJCXRoaXMuZGlzbWlzc0NvdW50RG93biA9IHRoaXMuZGlzbWlzc1NlY3M7CgkJCQkJdGhpcy50ZXh0QWxlcnQgPSB0aGlzLmdldEVycm9yOwoJCQkJfQoJCQl9LAogICAgICAgICAgICBhc3luYyByZW1vdmVUb2RvQ2xpY2tlZChpZCkgewogICAgICAgICAgICAgICAgaWYgKCFjb25maXJtKCdBcmUgeW91IHN1cmU/JykpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goYC9hcGkvdG9kb3MvZGVsZXRlYCwgewogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMudG9kby5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgdXNlcl9pZDogdGhpcy50b2RvLnVzZXJfaWQKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJDb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOCIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5qc29uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihqc29uID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ1NFVF9FUlJPUicsIHt0eXBlOiAnYWRkJywgZXJyb3I6IG51bGx9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ0RFTEVURV9UT0RPJywgdGhpcy50b2RvTGlzdC5maW5kSW5kZXgodCA9PiB0LmlkID09PSBpZCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuanNvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oanNvbiA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdTRVRfRVJST1InLCB7dHlwZTogJ2FkZCcsIGVycm9yOiBqc29uLmVycm9yfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0FsZXJ0KGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ1NFVF9FUlJPUicsIHt0eXBlOiAnYWRkJywgZXJyb3I6IGVycm9yfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0FsZXJ0KGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXN5bmMgZWRpdFN0YXR1c1RvZG8oKSB7CiAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaChgL2FwaS90b2Rvcy8ke3RoaXMudG9kby5pZH1gLCB7CiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2lkOiB0aGlzLnRvZG8udXNlcl9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMudG9kby50aXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMudG9kby5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkOiB0aGlzLnRvZG8uY29tcGxldGVkID09PSAnZmFsc2UnID8gJ3RydWUnIDogJ2ZhbHNlJwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04IgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmpzb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGpzb24gPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnU0VUX0VSUk9SJywge3R5cGU6ICdhZGQnLCBlcnJvcjogbnVsbH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnRURJVF9UT0RPJywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4OiB0aGlzLnRvZG9MaXN0LmluZGV4T2YodGhpcy50b2RvKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZG86IEpTT04ucGFyc2UoanNvbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpCgkJCQkJCXsKCQkJCQkJCXRoaXMuJHN0b3JlLmRpc3BhdGNoKCdTRVRfRVJST1InLCB7dHlwZTogJ2FkZCcsIGVycm9yOiBudWxsfSk7CgkJCQkJCQl0aGlzLiRzdG9yZS5kaXNwYXRjaCgnREVMRVRFX1RPRE8nLCB0aGlzLnRvZG9MaXN0LmZpbmRJbmRleCh0ID0+IHQuaWQgPT09IGlkKSk7CgkJCQkJCX0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAJewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuanNvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oanNvbiA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdTRVRfRVJST1InLCB7dHlwZTogJ2FkZCcsIGVycm9yOiBqc29uLmVycm9yfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0FsZXJ0KGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ1NFVF9FUlJPUicsIHt0eXBlOiAnYWRkJywgZXJyb3I6IGVycm9yfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0FsZXJ0KGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0K"},{"version":3,"sources":["TodoItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TodoItem.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\t<div>\n\t\t<Loader v-if=\"loading\"></Loader>\n\t\t<li v-else>\n\t\t\t<b-alert variant=\"danger\"\n\t\t\t\t\t :show=\"dismissCountDown\"\n\t\t\t\t\t dismissible fade\n\t\t\t\t\t @dismiss-count-down=\"countDownChanged\">\n\t\t\t\t{{ textAlert }}\n\t\t\t</b-alert>\n\t\t\t<span>\n\t\t\t\t<label>\n\t\t\t\t\t<input v-model=\"todo.completed === 'true'\" type=\"checkbox\" class=\"my-checkbox\"\n\t\t\t\t\t\t   v-on:change=\"editStatusTodo()\">\n\t\t\t\t</label>\n\n\t\t\t\t<keep-alive>\n\t\t\t\t\t<router-link tag=\"a\" :to=\"{ name: 'todoId', params: { id: todo.id} }\">{{todo.title}}</router-link>\n\t\t\t\t</keep-alive>\n\n\t\t\t</span>\n\t\t\t<button class=\"my-button-delete btn  btn-danger\" v-on:click=\"removeTodoClicked(todo.id)\">Remove</button>\n\t\t</li>\n\t</div>\n</template>\n\n\n<script>\n    import Loader from '@/components/Loader.vue'\n\n    export default {\n        name: 'TodoItem',\n        props: {\n            todo: {\n                type: Object,\n                required: true\n            }\n        },\n        data() {\n            return {\n            \terror: false,\n                loading: false,\n\t\t\t\ttextAlert: '',\n\t\t\t\tdismissSecs: 4,\n\t\t\t\tdismissCountDown: 0,\n\t\t\t\tdismissSecsGood: 4,\n\t\t\t\tdismissCountDownGood: 0\n            }\n        },\n        components: {\n            Loader\n        },\n        computed: {\n            todoList() {\n                return this.$store.getters.TODOS;\n            },\n\t\t\tgetError() {\n\t\t\t\treturn this.$store.getters.addError;\n\t\t\t}\n        },\n        methods: {\n\t\t\tcountDownChanged(dismissCountDown) {\n\t\t\t\tthis.dismissCountDown = dismissCountDown\n\t\t\t},\n\t\t\tcountDownChangedGood(dismissCountDownGood) {\n\t\t\t\tthis.dismissCountDownGood = dismissCountDownGood;\n\t\t\t},\n\t\t\tshowAlert(good) {\n\t\t\t\tif (good) {\n\t\t\t\t\tthis.dismissCountDown = 0;\n\t\t\t\t\tthis.dismissCountDownGood = this.dismissSecs;\n\t\t\t\t\tthis.textAlert = 'Task successfully removed';\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.dismissCountDownGood = 0;\n\t\t\t\t\tthis.dismissCountDown = this.dismissSecs;\n\t\t\t\t\tthis.textAlert = this.getError;\n\t\t\t\t}\n\t\t\t},\n            async removeTodoClicked(id) {\n                if (!confirm('Are you sure?')) {\n                    return;\n                }\n                this.loading = true;\n                await fetch(`/api/todos/delete`, {\n                    method: 'POST',\n                    body: JSON.stringify({\n                        id: this.todo.id,\n                        user_id: this.todo.user_id\n                    }),\n                    headers: {\n                        \"Content-type\": \"application/json; charset=UTF-8\"\n                    }\n                })\n                    .then(response => {\n                        if (response.status === 200 || response.status === 404) {\n                            response.json()\n                                .then(json => {\n                                    this.$store.dispatch('SET_ERROR', {type: 'add', error: null});\n                                    this.$store.dispatch('DELETE_TODO', this.todoList.findIndex(t => t.id === id));\n                                });\n                        } else {\n                            response.json()\n                                .then(json => {\n                                    this.$store.dispatch('SET_ERROR', {type: 'add', error: json.error});\n                                    this.showAlert(false);\n                                });\n                        }\n                    })\n                    .catch(error => {\n                        this.$store.dispatch('SET_ERROR', {type: 'add', error: error});\n                        this.showAlert(false);\n                    });\n\n                this.loading = false;\n            },\n            async editStatusTodo() {\n                await fetch(`/api/todos/${this.todo.id}`, {\n                    method: 'POST',\n                    body: JSON.stringify({\n                        user_id: this.todo.user_id,\n                        title: this.todo.title,\n                        description: this.todo.description,\n                        completed: this.todo.completed === 'false' ? 'true' : 'false'\n                    }),\n                    headers: {\n                        \"Content-type\": \"application/json; charset=UTF-8\"\n                    }\n                })\n                    .then(response => {\n                        if (response.status === 200) {\n                            response.json()\n                                .then(json => {\n                                    this.$store.dispatch('SET_ERROR', {type: 'add', error: null});\n                                    this.$store.dispatch('EDIT_TODO', {\n                                        idx: this.todoList.indexOf(this.todo),\n                                        todo: JSON.parse(json)\n                                    });\n                                });\n                        } else if (response.status === 404)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$store.dispatch('SET_ERROR', {type: 'add', error: null});\n\t\t\t\t\t\t\tthis.$store.dispatch('DELETE_TODO', this.todoList.findIndex(t => t.id === id));\n\t\t\t\t\t\t}\n                        else\n                        \t{\n                            response.json()\n                                .then(json => {\n                                    this.$store.dispatch('SET_ERROR', {type: 'add', error: json.error});\n                                    this.showAlert(false);\n                                });\n                        }\n                    })\n                    .catch(error => {\n                        this.$store.dispatch('SET_ERROR', {type: 'add', error: error});\n                        this.showAlert(false);\n                    });\n            }\n        }\n    }\n</script>\n\n\n<style scoped>\n\n    span {\n        display: flex;\n        align-items: center;\n    }\n\n    li {\n        border: 1px solid #ccc;\n        padding: 0.5rem 1rem;\n        display: flex;\n        align-items: center;\n        margin-top: 0.5rem;\n        margin-bottom: 0.5rem;\n    }\n\n    .my-checkbox {\n        display: flex;\n        align-items: center;\n        margin-right: 0.5rem;\n    }\n\n    .my-button-delete {\n        margin-left: auto;\n        padding-left: 1rem;\n    }\n</style>"]}]}